<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/src/main/java/br/com/peludinhos/web/controller/ContatoController.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/src/main/java/br/com/peludinhos/web/controller/ContatoController.java" />
              <option name="originalContent" value="package br.com.peludinhos.web.controller;&#10;import br.com.peludinhos.web.model.ContatoMensagem;&#10;import br.com.peludinhos.web.repository.ContatoMensagemRepository;&#10;import org.springframework.http.ResponseEntity;&#10;import org.springframework.web.bind.annotation.*;&#10;&#10;import java.util.HashMap;&#10;import java.util.Map;&#10;&#10;/**&#10; * Controlador do formulário de Contato.&#10; * Salva a mensagem no MySQL e expõe listagem via API.&#10; *&#10; * &lt;p&gt;Projeto: PeludinhosMours-Web-UC15&lt;/p&gt;&#10; * &lt;p&gt;Autor: Karol&lt;/p&gt;&#10; * &lt;p&gt;Data: 2025-10-30&lt;/p&gt;&#10; * &lt;p&gt;Versão: 1.0&lt;/p&gt;&#10; */&#10;&#10;@RestController&#10;@RequestMapping(&quot;/api&quot;)&#10;public class ContatoController {&#10;&#10;    private final ContatoMensagemRepository contatos;&#10;&#10;    public ContatoController(ContatoMensagemRepository contatos) {&#10;        this.contatos = contatos;&#10;    }&#10;&#10;    @PostMapping(&quot;/contato&quot;)&#10;    public ResponseEntity&lt;?&gt; enviarMensagem(@RequestBody ContatoMensagem mensagem) {&#10;        try {&#10;            // Validação simples&#10;            if (mensagem.getNome() == null || mensagem.getNome().trim().isEmpty()) {&#10;                throw new IllegalArgumentException(&quot;Informe o nome completo.&quot;);&#10;            }&#10;            if (mensagem.getEmail() == null || mensagem.getEmail().trim().isEmpty()) {&#10;                throw new IllegalArgumentException(&quot;Informe o e-mail.&quot;);&#10;            }&#10;            if (mensagem.getTelefone() == null || mensagem.getTelefone().trim().isEmpty()) {&#10;                throw new IllegalArgumentException(&quot;Informe o telefone.&quot;);&#10;            }&#10;            if (mensagem.getMensagem() == null || mensagem.getMensagem().trim().isEmpty()) {&#10;                throw new IllegalArgumentException(&quot;Escreva uma mensagem antes de enviar.&quot;);&#10;            }&#10;&#10;            // Set timestamp if missing&#10;            if (mensagem.getCreatedAt() == null) {&#10;                mensagem.setCreatedAt(java.time.OffsetDateTime.now());&#10;            }&#10;&#10;            // Salvar no banco&#10;            ContatoMensagem salvo = contatos.save(mensagem);&#10;&#10;            Map&lt;String, Object&gt; ok = new HashMap&lt;&gt;();&#10;            ok.put(&quot;id&quot;, salvo.getId());&#10;            ok.put(&quot;mensagem&quot;, &quot;Mensagem enviada com sucesso!&quot;);&#10;            ok.put(&quot;message&quot;, &quot;Mensagem enviada com sucesso!&quot;);&#10;            return ResponseEntity.status(201).body(ok);&#10;&#10;        } catch (Exception e) {&#10;            Map&lt;String, Object&gt; erro = new HashMap&lt;&gt;();&#10;            erro.put(&quot;mensagem&quot;, &quot;Falha ao enviar mensagem. Verifique os dados informados.&quot;);&#10;            erro.put(&quot;detail&quot;, e.getMessage());&#10;            return ResponseEntity.badRequest().body(erro);&#10;        }&#10;    }&#10;&#10;    @GetMapping(&quot;/contato&quot;)&#10;    public ResponseEntity&lt;?&gt; listarMensagens() {&#10;        return ResponseEntity.ok(contatos.findAll());&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="package br.com.peludinhos.web.controller;&#10;import br.com.peludinhos.web.model.ContatoMensagem;&#10;import br.com.peludinhos.web.repository.ContatoMensagemRepository;&#10;import org.springframework.http.ResponseEntity;&#10;import org.springframework.web.bind.annotation.*;&#10;&#10;import java.util.HashMap;&#10;import java.util.Map;&#10;&#10;/**&#10; * Controlador do formulário de Contato.&#10; * Salva a mensagem no MySQL e expõe listagem via API.&#10; *&#10; * &lt;p&gt;Projeto: PeludinhosMours-Web-UC15&lt;/p&gt;&#10; * &lt;p&gt;Autor: Karol&lt;/p&gt;&#10; * &lt;p&gt;Data: 2025-10-30&lt;/p&gt;&#10; * &lt;p&gt;Versão: 1.0&lt;/p&gt;&#10; */&#10;&#10;@RestController&#10;@RequestMapping(&quot;/api&quot;)&#10;public class ContatoController {&#10;&#10;    private final ContatoMensagemRepository contatos;&#10;&#10;    public ContatoController(ContatoMensagemRepository contatos) {&#10;        this.contatos = contatos;&#10;    }&#10;&#10;    @PostMapping(&quot;/contato&quot;)&#10;    public ResponseEntity&lt;?&gt; enviarMensagem(@RequestBody ContatoMensagem mensagem) {&#10;        try {&#10;            // Validação simples&#10;            if (mensagem.getNome() == null || mensagem.getNome().trim().isEmpty()) {&#10;                throw new IllegalArgumentException(&quot;Informe o nome completo.&quot;);&#10;            }&#10;            if (mensagem.getEmail() == null || mensagem.getEmail().trim().isEmpty()) {&#10;                throw new IllegalArgumentException(&quot;Informe o e-mail.&quot;);&#10;            }&#10;            if (mensagem.getTelefone() == null || mensagem.getTelefone().trim().isEmpty()) {&#10;                throw new IllegalArgumentException(&quot;Informe o telefone.&quot;);&#10;            }&#10;            if (mensagem.getMensagem() == null || mensagem.getMensagem().trim().isEmpty()) {&#10;                throw new IllegalArgumentException(&quot;Escreva uma mensagem antes de enviar.&quot;);&#10;            }&#10;&#10;            // Set timestamp if missing&#10;            if (mensagem.getCreatedAt() == null) {&#10;                mensagem.setCreatedAt(java.time.OffsetDateTime.now());&#10;            }&#10;&#10;            // Salvar no banco&#10;            ContatoMensagem salvo = contatos.save(mensagem);&#10;&#10;            Map&lt;String, Object&gt; ok = new HashMap&lt;&gt;();&#10;            ok.put(&quot;id&quot;, salvo.getId());&#10;            ok.put(&quot;mensagem&quot;, &quot;Mensagem enviada com sucesso!&quot;);&#10;            ok.put(&quot;message&quot;, &quot;Mensagem enviada com sucesso!&quot;);&#10;            return ResponseEntity.status(201).body(ok);&#10;&#10;        } catch (Exception e) {&#10;            Map&lt;String, Object&gt; erro = new HashMap&lt;&gt;();&#10;            erro.put(&quot;mensagem&quot;, &quot;Falha ao enviar mensagem. Verifique os dados informados.&quot;);&#10;            erro.put(&quot;detail&quot;, e.getMessage());&#10;            return ResponseEntity.badRequest().body(erro);&#10;        }&#10;    }&#10;&#10;    @GetMapping(&quot;/contato&quot;)&#10;    public ResponseEntity&lt;?&gt; listarMensagens() {&#10;        return ResponseEntity.ok(contatos.findAll());&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>